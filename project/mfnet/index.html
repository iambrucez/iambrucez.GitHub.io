<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>MF-Net: A Novel Stylized Multilingual Font Generation Method | YufanZ</title>
<meta name="keywords" content="">
<meta name="description" content="Authors: Yufan Zhang, Junkai Man, Peng Sun
Paper presented at ACM Multimedia 2022
DOI: 10.1145/3503161.3548414
GitHub | MFont.net (coming soon in next year)
Introduction Designing fonts is never a easy task, especially for non-Latin languages such as Chinese for its complex glyph structures and large number of letters. Moreover, in real-world problems, designing a multilingual font is a even more challenging task that requires years of study, proficiency in the use of many professional tools and collaboration between multiple font designer for different languages.">
<meta name="author" content="">
<link rel="canonical" href="http://yufanz.xyz/project/mfnet/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.652850391e7efc45b187c0941d820d236c4096c6e8293d940ba64190fbfb4b34.css" integrity="sha256-ZShQOR5&#43;/EWxh8CUHYINI2xAlsboKT2UC6ZBkPv7SzQ=" rel="preload stylesheet" as="style">
<script defer crossorigin="anonymous" src="/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js" integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG&#43;9vmJ0cTS&#43;ovo0FeA="
    onload="hljs.initHighlightingOnLoad();"></script>
<link rel="icon" href="https://raw.githubusercontent.com/iamyufan/iambrucez.GitHub.io/main/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="http://yufanz.xyz/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="http://yufanz.xyz/favicon-32x32.png">
<link rel="apple-touch-icon" href="http://yufanz.xyz/apple-touch-icon.png">
<link rel="mask-icon" href="http://yufanz.xyz/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
</noscript><meta property="og:title" content="MF-Net: A Novel Stylized Multilingual Font Generation Method" />
<meta property="og:description" content="Authors: Yufan Zhang, Junkai Man, Peng Sun
Paper presented at ACM Multimedia 2022
DOI: 10.1145/3503161.3548414
GitHub | MFont.net (coming soon in next year)
Introduction Designing fonts is never a easy task, especially for non-Latin languages such as Chinese for its complex glyph structures and large number of letters. Moreover, in real-world problems, designing a multilingual font is a even more challenging task that requires years of study, proficiency in the use of many professional tools and collaboration between multiple font designer for different languages." />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://yufanz.xyz/project/mfnet/" />
<meta property="og:image" content="http://yufanz.xyz/project/images/mfnet.jpg" /><meta property="article:section" content="project" />
<meta property="article:published_time" content="2022-10-10T00:00:00+00:00" />
<meta property="article:modified_time" content="2022-10-10T00:00:00+00:00" />

<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:image" content="http://yufanz.xyz/project/images/mfnet.jpg" />
<meta name="twitter:title" content="MF-Net: A Novel Stylized Multilingual Font Generation Method"/>
<meta name="twitter:description" content="Authors: Yufan Zhang, Junkai Man, Peng Sun
Paper presented at ACM Multimedia 2022
DOI: 10.1145/3503161.3548414
GitHub | MFont.net (coming soon in next year)
Introduction Designing fonts is never a easy task, especially for non-Latin languages such as Chinese for its complex glyph structures and large number of letters. Moreover, in real-world problems, designing a multilingual font is a even more challenging task that requires years of study, proficiency in the use of many professional tools and collaboration between multiple font designer for different languages."/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Projects",
      "item": "http://yufanz.xyz/project/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "MF-Net: A Novel Stylized Multilingual Font Generation Method",
      "item": "http://yufanz.xyz/project/mfnet/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "MF-Net: A Novel Stylized Multilingual Font Generation Method",
  "name": "MF-Net: A Novel Stylized Multilingual Font Generation Method",
  "description": "Authors: Yufan Zhang, Junkai Man, Peng Sun\nPaper presented at ACM Multimedia 2022\nDOI: 10.1145/3503161.3548414\nGitHub | MFont.net (coming soon in next year)\nIntroduction Designing fonts is never a easy task, especially for non-Latin languages such as Chinese for its complex glyph structures and large number of letters. Moreover, in real-world problems, designing a multilingual font is a even more challenging task that requires years of study, proficiency in the use of many professional tools and collaboration between multiple font designer for different languages.",
  "keywords": [
    
  ],
  "articleBody": " Authors: Yufan Zhang, Junkai Man, Peng Sun\nPaper presented at ACM Multimedia 2022\nDOI: 10.1145/3503161.3548414\nGitHub | MFont.net (coming soon in next year)\nIntroduction Designing fonts is never a easy task, especially for non-Latin languages such as Chinese for its complex glyph structures and large number of letters. Moreover, in real-world problems, designing a multilingual font is a even more challenging task that requires years of study, proficiency in the use of many professional tools and collaboration between multiple font designer for different languages. However, a multilingual font a very important for many applications such as multilingual websites, multilingual documents, and multilingual books. Therefore, it is very important to develop a method that can automatically generate multilingual fonts.\nIn this project, I, together with my roommate Junkai, tried to tackle this issue with Deep Learning. In other words, our work is to achieve a well-performed few-shot multilingual stylized font generator that takes a small number of the font images of the target style from one language, and generates the whole family of fonts in any other unseen languages that share the target font style. Our work is promising as it minimizes the cost of multilingual stylized font design, which enables people to design their own fonts without years of study and proficiency in the use of many professional tools.\nAfter the paper is accepted by ACM Multimedia 2022, we have been working on the productionization of our method, MFont.net. We will release the service of our method in the next year. Stay tuned!\nPaper Abstract Creating a complete stylized font library that helps the audience to perceive information from the text often requires years of study and proficiency in the use of many professional tools. Accordingly, automatic stylized font generation in a deep learning-based fashion is a desirable but challenging task that has attracted a lot of attention in recent years. This paper revisits the state-of-the-art methods for stylized font generation and presents a taxonomy of the deep learning-based stylized font generation. Despite the notable performance of the existing models, stylized multilingual font generation, the task of applying specific font style to diverse characters in multiple languages has never been reported to be addressed. An efficient and economical method for stylized multilingual font generation is essential in numerous application scenarios that require communication with international audiences. We propose a solution for few-shot multilingual stylized font generation by a fast feed-forward network, Multilingual Font Generation Network (MF-Net), which can transfer previously unseen font styles from a few samples to characters from previously unseen languages. Following the Generative Adversarial Network (GAN) framework, MF-Net adopts two separate encoders in the generator to decouple a font image’s content and style information. We adopt an attention module in the style encoder to extract both shallow and deep style features. Moreover, we also design a novel language complexity-aware skip connection to adaptive adjust the structural information to be preserved. With an effective loss function to improve the visual quality of the generated font images, we show the effectiveness of the proposed MF-Net based on quantitative and subjective visual evaluation, and compare it with the existing models in the scenario of stylized multilingual font generation.\nNetwork Architecture Above is the overview of the MF-Net, which is a GAN-based model. The generator consists of two encoders and one decoder. The discriminator contains the content discriminator and the style discriminator The content encoder is to capture the structural information of the content and produces a content feature. The style encoder is to extract the style information of the stylized font and produce a style feature. In the training process, MF-Net will input one content image from a randomly selected character’s standard font. The style images would be randomly selected images from one stylized font. The decoder will generate the output image based on the content and style features. Moreover, we also propose a new module, language complexity-aware skip connection, to enable MF-Net to adjust the level of structural information preservation from the content encoder according to the language complexity of the content images.\nInstead of feeding intact structural information to the decoder, we design the language complexity-aware skip connection to adaptively adjust how much structural information of each receptive field is to be preserved. The intuition is that for complex languages such as Chinese and Japanese, the local structural information is important for us humans to identify which character the image is referred to, whereas for languages with less complexity like English, the global structural information is more important.\nTo detect how complex the language of the content image is, aka the language complexity, we design the language complexity indicator. As the figure shows, the language complexity indicator will assign the blurriness based on each feature map. Specifically, there is the structure extractor including a 1 by 1 convolution layer and the texture extractor including the Gram matrix operation. Then, with the weight-sharing convolution layer, different levels of blurriness will be added to the feature maps.\nGallery Visual comparison of our proposed model and its competitor on seen language.\nVisual comparison of our proposed model and its competitor on unseen language.\nPresentation Video presentation\nVideo presentation - Slides\nPoster presentation - Poster\nCite the paper @inproceedings{10.1145/3503161.3548414, author = {Zhang, Yufan and Man, Junkai and Sun, Peng}, title = {MF-Net: A Novel Few-Shot Stylized Multilingual Font Generation Method}, year = {2022}, isbn = {9781450392037}, publisher = {Association for Computing Machinery}, address = {New York, NY, USA}, url = {https://doi.org/10.1145/3503161.3548414}, doi = {10.1145/3503161.3548414}, abstract = {Creating a complete stylized font library that helps the audience to perceive information from the text often requires years of study and proficiency in the use of many professional tools. Accordingly, automatic stylized font generation in a deep learning-based fashion is a desirable but challenging task that has attracted a lot of attention in recent years. This paper revisits the state-of-the-art methods for stylized font generation and presents a taxonomy of the deep learning-based stylized font generation. Despite the notable performance of the existing models, stylized multilingual font generation, the task of applying specific font style to diverse characters in multiple languages has never been reported to be addressed. An efficient and economical method for stylized multilingual font generation is essential in numerous application scenarios that require communication with international audiences. We propose a solution for few-shot multilingual stylized font generation by a fast feed-forward network, Multilingual Font Generation Network (MF-Net), which can transfer previously unseen font styles from a few samples to characters from previously unseen languages. Following the Generative Adversarial Network (GAN) framework, MF-Net adopts two separate encoders in the generator to decouple a font image's content and style information. We adopt an attention module in the style encoder to extract both shallow and deep style features. Moreover, we also design a novel language complexity-aware skip connection to adaptive adjust the structural information to be preserved. With an effective loss function to improve the visual quality of the generated font images, we show the effectiveness of the proposed MF-Net based on quantitative and subjective visual evaluation, and compare it with the existing models in the scenario of stylized multilingual font generation. The source code is available on https://github.com/iamyufan/MF-Net.}, booktitle = {Proceedings of the 30th ACM International Conference on Multimedia}, pages = {2088–2096}, numpages = {9}, keywords = {font design, image synthesis, few-shot learning, style transfer}, location = {Lisboa, Portugal}, series = {MM '22} } Yufan Zhang, Junkai Man, and Peng Sun. 2022. MF-Net: A Novel Few-shot Stylized Multilingual Font Generation Method. In Proceedings of the 30th ACM International Conference on Multimedia (MM ‘22). Association for Computing Machinery, New York, NY, USA, 2088–2096. https://doi.org/10.1145/3503161.3548414\n",
  "wordCount" : "1269",
  "inLanguage": "en",
  "image":"http://yufanz.xyz/project/images/mfnet.jpg","datePublished": "2022-10-10T00:00:00Z",
  "dateModified": "2022-10-10T00:00:00Z",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "http://yufanz.xyz/project/mfnet/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "YufanZ",
    "logo": {
      "@type": "ImageObject",
      "url": "https://raw.githubusercontent.com/iamyufan/iambrucez.GitHub.io/main/favicon.ico"
    }
  }
}
</script>
</head>

<body class="" id="top">

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="http://yufanz.xyz/" accesskey="h" title="YufanZ (Alt + H)">
                <p class="header-title">YufanZ<span style="color: #ff7700;">.</span></p>
            </a>
            <div class="logo-switches">
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="http://yufanz.xyz/project/" title="Project">
                    <span>
                        <p class="menu-title">Project</p>
                        </span>
                </a>
            </li>
            <li>
                <a href="http://yufanz.xyz/blog/" title="Blog">
                    <span>
                        <p class="menu-title">Blog</p>
                        </span>
                </a>
            </li>
            <li>
                <a href="http://yufanz.xyz/cv/" title="CV">
                    <span>
                        <p class="menu-title">CV</p>
                        </span>
                </a>
            </li>
            <li>
                <a href="http://yufanz.xyz/search/" title="🔍">
                    <span>
                        <p class="menu-title">🔍</p>
                        </span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single" style=" max-width: calc(1*(var(--main-width) + var(--gap) * 2));">
  <header class="post-header">
    <div class="breadcrumbs"><a href="http://yufanz.xyz/">Home</a>&nbsp;»&nbsp;<a href="http://yufanz.xyz/project/">Projects</a></div>
    <h1 class="post-title">
      MF-Net: A Novel Stylized Multilingual Font Generation Method
    </h1>
    <div class="post-meta"><span title='2022-10-10 00:00:00 +0000 UTC'>October 10, 2022</span>

</div>
  </header>
  
  <img loading="lazy" src="http://yufanz.xyz/project/images/R-MFNet.jpg">
  <div class="post-content"><blockquote>
<p><strong>Authors</strong>: <a href="https://yufanz.xyz">Yufan Zhang</a>, <a href="https://junkaiman.com">Junkai Man</a>, <a href="https://scholars.duke.edu/person/Peng.Sun1">Peng Sun</a></p>
</blockquote>
<blockquote>
<p>Paper presented at <a href="https://2022.acmmm.org/">ACM Multimedia 2022</a></p>
<p>DOI: <a href="https://doi.org/10.1145/3503161.3548414">10.1145/3503161.3548414</a></p>
</blockquote>
<p><a href="https://github.com/iamyufan/MF-Net">GitHub</a> | <a href="https://mfont.net/">MFont.net (coming soon in next year)</a></p>
<hr>
<h3 id="introduction">Introduction<a hidden class="anchor" aria-hidden="true" href="#introduction">#</a></h3>
<!-- raw HTML omitted -->
<p>Designing fonts is never a easy task, especially for non-Latin languages such as Chinese for its complex glyph structures and large number of letters. Moreover, in real-world problems, designing a multilingual font is a even more challenging task that requires years of study, proficiency in the use of many professional tools and collaboration between multiple font designer for different languages. However, a multilingual font a very important for many applications such as multilingual websites, multilingual documents, and multilingual books. Therefore, it is very important to develop a method that can automatically generate multilingual fonts.</p>
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<p>In this project, I, together with my roommate <a href="https://junkaiman.com">Junkai</a>, tried to tackle this issue with Deep Learning. In other words, our work is to achieve a well-performed few-shot multilingual stylized font generator that takes a small number of the font images of the target style from one language, and generates the whole family of fonts in any other unseen languages that share the target font style. Our work is promising as it minimizes the cost of multilingual stylized font design, which enables people to design their own fonts without years of study and proficiency in the use of many professional tools.</p>
<p>After the paper is accepted by ACM Multimedia 2022, we have been working on the productionization of our method, <a href="https://mfont.net/">MFont.net</a>. We will release the service of our method in the next year. Stay tuned!</p>
<h3 id="paper-abstract">Paper Abstract<a hidden class="anchor" aria-hidden="true" href="#paper-abstract">#</a></h3>
<p>Creating a complete stylized font library that helps the audience to perceive information from the text often requires years of study and proficiency in the use of many professional tools. Accordingly, automatic stylized font generation in a deep learning-based fashion is a desirable but challenging task that has attracted a lot of attention in recent years. This paper revisits the state-of-the-art methods for stylized font generation and presents a taxonomy of the deep learning-based stylized font generation. Despite the notable performance of the existing models, stylized multilingual font generation, the task of applying specific font style to diverse characters in multiple languages has never been reported to be addressed. An efficient and economical method for stylized multilingual font generation is essential in numerous application scenarios that require communication with international audiences. We propose a solution for few-shot multilingual stylized font generation by a fast feed-forward network, <strong>M</strong>ultilingual <strong>F</strong>ont Generation <strong>Net</strong>work (<strong>MF-Net</strong>), which can transfer previously unseen font styles from a few samples to characters from previously unseen languages. Following the Generative Adversarial Network (GAN) framework, MF-Net adopts two separate encoders in the generator to decouple a font image&rsquo;s content and style information. We adopt an attention module in the style encoder to extract both shallow and deep style features. Moreover, we also design a novel language complexity-aware skip connection to adaptive adjust the structural information to be preserved. With an effective loss function to improve the visual quality of the generated font images, we show the effectiveness of the proposed MF-Net based on quantitative and subjective visual evaluation, and compare it with the existing models in the scenario of stylized multilingual font generation.</p>
<h3 id="network-architecture">Network Architecture<a hidden class="anchor" aria-hidden="true" href="#network-architecture">#</a></h3>

<img src="https://raw.githubusercontent.com/iamyufan/MF-Net/main/img/1_overall.png" width="100%"/>

<p>Above is the overview of the MF-Net, which is a GAN-based model.
The generator consists of two encoders and one decoder.
The discriminator contains the content discriminator and the style discriminator
The content encoder is to capture the structural information of the content and produces a content feature.
The style encoder is to extract the style information of the stylized font and produce a style feature.
In the training process, MF-Net will input one content image from a randomly selected character’s standard font. The style images would be randomly selected images from one stylized font. 
The decoder will generate the output image based on the content and style features.
Moreover, we also propose a new module, language complexity-aware skip connection, to enable MF-Net to adjust the level of structural information preservation from the content encoder according to the language complexity of the content images.</p>

<img src="https://raw.githubusercontent.com/iamyufan/MF-Net/main/img/2_indicator.png" width="50%"/>

<p>Instead of feeding intact structural information to the decoder, we design the language complexity-aware skip connection to adaptively adjust how much structural information of each receptive field is to be preserved.
The intuition is that for complex languages such as Chinese and Japanese, the local structural information is important for us humans to identify which character the image is referred to, whereas for languages with less complexity like English, the global structural information is more important.</p>
<p>To detect how complex the language of the content image is, aka the language complexity, we design the language complexity indicator.
As the figure shows, the language complexity indicator will assign the blurriness based on each feature map. 
Specifically, there is the structure extractor including a 1 by 1 convolution layer and the texture extractor including the Gram matrix operation. Then, with the weight-sharing convolution layer, different levels of blurriness will be added to the feature maps.</p>
<h3 id="gallery">Gallery<a hidden class="anchor" aria-hidden="true" href="#gallery">#</a></h3>
<p>Visual comparison of our proposed model and its competitor on seen language.</p>

<img src="https://raw.githubusercontent.com/iamyufan/MF-Net/main/img/4_seen_lan_vis.png" width="90%"/>

<p>Visual comparison of our proposed model and its competitor on unseen language.</p>

<img src="https://raw.githubusercontent.com/iamyufan/MF-Net/main/img/5_unseen_lan_vis.png" width="100%"/>

<h3 id="presentation">Presentation<a hidden class="anchor" aria-hidden="true" href="#presentation">#</a></h3>
<p>Video presentation</p>

<iframe width="560" height="315" src="https://www.youtube.com/embed/YVkbaq7vZTA" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>

<p>Video presentation - <a href="https://raw.githubusercontent.com/iamyufan/MF-Net/main/presentation/mfnet.pdf">Slides</a></p>
<p>Poster presentation - <a href="https://raw.githubusercontent.com/iamyufan/MF-Net/main/presentation/poster.png">Poster</a></p>
<h3 id="cite-the-paper">Cite the paper<a hidden class="anchor" aria-hidden="true" href="#cite-the-paper">#</a></h3>
<pre tabindex="0"><code>@inproceedings{10.1145/3503161.3548414,
   author = {Zhang, Yufan and Man, Junkai and Sun, Peng},
   title = {MF-Net: A Novel Few-Shot Stylized Multilingual Font Generation Method},
   year = {2022},
   isbn = {9781450392037},
   publisher = {Association for Computing Machinery},
   address = {New York, NY, USA},
   url = {https://doi.org/10.1145/3503161.3548414},
   doi = {10.1145/3503161.3548414},
   abstract = {Creating a complete stylized font library that helps the audience to perceive information from the text often requires years of study and proficiency in the use of many professional tools. Accordingly, automatic stylized font generation in a deep learning-based fashion is a desirable but challenging task that has attracted a lot of attention in recent years. This paper revisits the state-of-the-art methods for stylized font generation and presents a taxonomy of the deep learning-based stylized font generation. Despite the notable performance of the existing models, stylized multilingual font generation, the task of applying specific font style to diverse characters in multiple languages has never been reported to be addressed. An efficient and economical method for stylized multilingual font generation is essential in numerous application scenarios that require communication with international audiences. We propose a solution for few-shot multilingual stylized font generation by a fast feed-forward network, Multilingual Font Generation Network (MF-Net), which can transfer previously unseen font styles from a few samples to characters from previously unseen languages. Following the Generative Adversarial Network (GAN) framework, MF-Net adopts two separate encoders in the generator to decouple a font image&#39;s content and style information. We adopt an attention module in the style encoder to extract both shallow and deep style features. Moreover, we also design a novel language complexity-aware skip connection to adaptive adjust the structural information to be preserved. With an effective loss function to improve the visual quality of the generated font images, we show the effectiveness of the proposed MF-Net based on quantitative and subjective visual evaluation, and compare it with the existing models in the scenario of stylized multilingual font generation. The source code is available on https://github.com/iamyufan/MF-Net.},
   booktitle = {Proceedings of the 30th ACM International Conference on Multimedia},
   pages = {2088–2096},
   numpages = {9},
   keywords = {font design, image synthesis, few-shot learning, style transfer},
   location = {Lisboa, Portugal},
   series = {MM &#39;22}
}
</code></pre><blockquote>
<p>Yufan Zhang, Junkai Man, and Peng Sun. 2022. MF-Net: A Novel Few-shot Stylized Multilingual Font Generation Method. In Proceedings of the 30th ACM International Conference on Multimedia (MM &lsquo;22). Association for Computing Machinery, New York, NY, USA, 2088–2096. <a href="https://doi.org/10.1145/3503161.3548414">https://doi.org/10.1145/3503161.3548414</a></p>
</blockquote>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
    </ul>
  </footer>
</article>
    </main>
    
<footer class="footer">
    <span>&copy; 2022 <a href="http://yufanz.xyz/">YufanZ</a></span>
    
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
</body>

</html>
